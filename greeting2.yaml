type: custom:vertical-stack-in-card
style: |
  ha-card {
    box-shadow: none;
    background: rgba(0,0,0,0);
    border-bottom-right-radius: 8px;
    border-bottom-left-radius: 8px;
    border-top-right-radius: 8px;
    border-top-left-radius: 8px;
  }
cards:
  - type: 'custom:button-card'
    color_type: blank-card
    styles:
     card:
       - height: 2px
  - type: custom:vertical-stack-in-card
    cards:
#      - type: 'custom:button-card'
#        color_type: card
#        color: var(--primary-background-color)
#        styles:
#         card:
#           - height: 1px
      - type: horizontal-stack
        style: |
          ha-card {
            box-shadow: none;
            color: rgba(0,0,0,0);
            border-style: hidden;
            border-bottom-right-radius: 0px;
            border-bottom-left-radius: 0px;
            border-top-right-radius: 0px;
            border-top-left-radius: 0px;
          }
        cards:
          - type: 'custom:button-card'
#            style: |
#              ha-card {
#                box-shadow: none;
#                background: var(--primary-color);
#                border-bottom-right-radius: 0px;
#                border-bottom-left-radius: 0px;
#              }
            color_type: blank-card
            styles:
             card:
               - width: 3px
#          - type: 'custom:button-card'
#            style: |
#              ha-card {
#                box-shadow: none;
#                background: var(--homekit);
#                border-bottom-right-radius: 0px;
#                border-bottom-left-radius: 0px;
#              }
#            color_type: card
#            background-color: var(--homekit)
#            styles:
#             card:
#               - width: 5px
#          - type: custom:grid-layout
#            layout:
#              grid-template-columns: 20% 60% 10% 10%
#              grid-template-rows: 100%
#              grid-template-areas: |
#                "header header header header"
          - type: custom:layout-card
            layout: horizontal
            column_width: [20%, 60%, 10%, 10%]
            cards:
              - type: vertical-stack
#                view_layout:
#                  grid-area: header
                style: |
                  ha-card {
                    box-shadow: none;
                    border-style: hidden;
                    border-bottom-right-radius: 0px;
                    border-bottom-left-radius: 0px;
                  }
                cards:
                  - type: 'custom:button-card'
                    color_type: card
                    color: rgba(0,0,0,0)
                    styles:
                     card:
                       - height: 5px
                  - type: custom:button-card
                    entity: sensor.dark_sky_summary
                    color_type: card
                    size: 50%
                    lock: false
                    show_name: false
                    show_state: false
                    show_label: false
                    show_icon: true
                    show_entity_picture: false
                    tap_action:
                      action: more-info
                      haptic: success
                    aspect_ratio: 1/1
                    margin-right: 60px
                    styles:
                      card:
                        - border-radius: 100%
                        - border-style: solid
                        - border-color: var(--severity-3)
                        - padding: 0px
                        - box-shadow: none
                      icon:
                        - color: var(--primary-background-color)
                    state:
                      - value: "Mostly Cloudy"
                        color: '#B6B6B6'
                      - value: "Partly Cloudy"
                        color: '#D3D3D3'
                      - value: "partlycloudy"
                        color: '#D3D3D3'
                      - value: "Sunny"
                        color: '#FFCBA3'
                      - value: "sunny"
                        color: '#FFCBA3'
                      - value: "Overcast"
                        color: '#718CA0'
                      - value: "Possible Light Rain"
                        color: '#82BBC2'
                      - value: "Light Rain"
                        color: '#82BBC2'
                      - value: "Rain"
                        color: '#8097BA'
                      - value: "Possible Drizzle"
                        color: '#82BBC2'
                      - value: "Clear"
                        color: '#FFCBA3'
                      - value: "clearnight"
                        color: '#C2B8CF'
                      - value: "Windy"
                        color: '#AED6C5'
              - type: vertical-stack
#                view_layout:
#                  grid-area: header
                flex-grow: 2
                style: |
                  ha-card {
                    box-shadow: none;
                    border-style: hidden;
                    border-bottom-right-radius: 0px;
                    border-bottom-left-radius: 0px;
                  }
                cards:
                - type: markdown
                  style:
                    .: |
                      ha-card {
                         background-color: rgba(0,0,0,0) !important;
                         box-shadow: none;
                      }
                    ha-markdown:
                      $: |
                        ha-markdown-element:first-of-type h2 {
                          background-color: rgba(0,0,0,0);
                          color: var(--primary-color);
                          font-size: 18px;
                          line-height: 18px;
                        }
                        ha-markdown-element:first-of-type h3 {
                          background-color: rgba(0,0,0,0);
                          font-weight: normal;
                          color: var(--primary-text-color);
                          font-size: 12px;
                          line-height: 12px;
                        }
                        ha-markdown-element:second-of-type h3 {
                          background-color: rgba(0,0,0,0);
                          color: var(--primary-text-color);
                          font-weight: normal;
                          font-size: 12px;
                          line-height: 12px;
                        }
                  content: |
                      ## {{ states('input_select.frontend_greeting') }}, {{user}}
                      ### Today will be {{ states('sensor.dark_sky_daytime_high_temperature_1d') }}Â°C <br/> {{ states('sensor.dark_sky_summary_1d') }}
#                - type: 'custom:button-card'
#                  color_type: blank-card
#                  styles:
#                   card:
#                     - height: 2px
              - type: vertical-stack
#                view_layout:
#                  grid-area: header
                style: |
                  ha-card {
                    box-shadow: none;
                    border-style: hidden;
                    border-bottom-right-radius: 0px;
                    border-bottom-left-radius: 0px;
                  }
                cards:
                  - type: 'custom:button-card'
                    color_type: blank-card
                    styles:
                     card:
                       - height: 3px
                  - type: conditional
                    conditions:
                      - entity: group.all_door_sensors
                        state: "off"
                    card:
                        type: 'custom:button-card'
                        color_type: blank-card
                        aspect_ratio: 1.1/1
                  - type: conditional
                    conditions:
                      - entity: group.all_door_sensors
                        state: "on"
                    card:
                        type: custom:button-card
                        entity: group.all_door_sensors
                        color_type: icon
                        size: 100%
                        lock: false
                        show_name: false
                        show_state: false
                        show_label: false
                        show_icon: true
                        show_entity_picture: false
                        tap_action:
                          action: more-info
                          haptic: success
                        aspect_ratio: 1.1/1
                        margin-right: 60px
                        styles:
                          card:
                            - color: rgba(0,0,0,0)
                            - background-color: rgba(0,0,0,0)
                            - border-style: hidden
                            - padding: 0px
                            - box-shadow: none
                          grid:
                            - position: relative
                          custom_fields:
                            notification:
                              - background-color: >
                                  [[[
                                    if (states['sensor.current_doors_open'].state == 0)
                                      return "rgba(255,255,255,0.0)";
                                    return "var(--red)";
                                  ]]]
                              - border-radius: 100%
                              - position: absolute
                              - left: 52%
                              - top: 8%
                              - height: 13px
                              - width: 13px
                              - font-size: 7px
                              - line-height: 13px
                              - font-color: var(--primary-text-color)
                              - color: var(--primary-text-color)
                        custom_fields:
                          notification: >
                            [[[ if (states['sensor.current_doors_open'].state < 1) return '&nbsp;'; else return states['sensor.current_doors_open'].state ]]]
                        state:
                          - value: "on"
                            color: var(--primary-color)
                          - value: "off"
                            color: var(--primary-background-color)
                  - type: conditional
                    conditions:
                      - entity: group.all_leak_sensors
                        state: "off"
                    card:
                        type: 'custom:button-card'
                        color_type: blank-card
                        aspect_ratio: 1.1/1
                  - type: conditional
                    conditions:
                      - entity: group.all_leak_sensors
                        state: "on"
                    card:
                        type: custom:button-card
                        entity: group.all_leak_sensors
                        color_type: icon
                        size: 100%
                        lock: false
                        show_name: false
                        show_state: false
                        show_label: false
                        show_icon: true
                        show_entity_picture: false
                        tap_action:
                          action: more-info
                          haptic: success
                        aspect_ratio: 1.1/1
                        margin-right: 60px
                        styles:
                          card:
                            - color: rgba(0,0,0,0)
                            - background-color: rgba(0,0,0,0)
                            - border-style: hidden
                            - padding: 0px
                            - box-shadow: none
                          grid:
                            - position: relative
                          custom_fields:
                            notification:
                              - background-color: >
                                  [[[
                                    if (states['sensor.current_leaks'].state == 0)
                                      return "rgba(255,255,255,0.0)";
                                    return "var(--red)";
                                  ]]]
                              - border-radius: 100%
                              - position: absolute
                              - left: 52%
                              - top: 8%
                              - height: 13px
                              - width: 13px
                              - font-size: 7px
                              - line-height: 13px
                              - font-color: var(--primary-text-color)
                              - color: var(--primary-text-color)
                        custom_fields:
                          notification: >
                            [[[ if (states['sensor.current_leaks'].state < 1) return '&nbsp;'; else return states['sensor.current_leaks'].state ]]]
                        state:
                          - value: "on"
                            color: var(--primary-color)
                          - value: "off"
                            color: var(--primary-background-color)
              - type: vertical-stack
#                view_layout:
#                  grid-area: header
                style: |
                  ha-card {
                    box-shadow: none;
                    border-style: hidden;
                    border-bottom-right-radius: 0px;
                    border-bottom-left-radius: 0px;
                  }
                cards:
                  - type: 'custom:button-card'
                    color_type: blank-card
                    styles:
                     card:
                       - height: 3px
                  - type: conditional
                    conditions:
                      - entity: group.all_lighting
                        state: "on"
                    card:
                        type: custom:button-card
                        entity: group.all_lighting
                        color_type: icon
                        size: 100%
                        lock: false
                        show_name: false
                        show_state: false
                        show_label: false
                        show_icon: true
                        show_entity_picture: false
                        tap_action:
                          action: toggle
                          haptic: success
                        aspect_ratio: 1.1/1
                        margin-right: 60px
                        styles:
                          card:
                            - color: rgba(0,0,0,0)
                            - background-color: rgba(0,0,0,0)
                            - border-style: hidden
                            - padding: 0px
                            - box-shadow: none
                          grid:
                            - position: relative
                          custom_fields:
                            notification:
                              - background-color: >
                                  [[[
                                    if (states['sensor.current_lights_on'].state == 0)
                                      return "rgba(255,255,255,0.0)";
                                    return "var(--red)";
                                  ]]]
                              - border-radius: 100%
                              - position: absolute
                              - left: 52%
                              - top: 8%
                              - height: 13px
                              - width: 13px
                              - font-size: 7px
                              - line-height: 13px
                              - font-color: var(--primary-text-color)
                              - color: var(--primary-text-color)
                        custom_fields:
                          notification: >
                            [[[ if (states['sensor.current_lights_on'].state < 1) return '&nbsp;'; else return states['sensor.current_lights_on'].state ]]]
                        state:
                          - value: "on"
                            color: var(--primary-color)
                          - value: "off"
                            color: var(--primary-background-color)
#                  - type: conditional
#                    conditions:
#                      - entity: group.all_lighting
#                        state: "off"
#                    card:
#                        type: 'custom:button-card'
#                        color_type: blank-card
#                        aspect_ratio: 1.1/1
                  - type: conditional
                    conditions:
                      - entity: group.all_bins
                        state: "off"
                    card:
                        type: 'custom:button-card'
                        color_type: blank-card
                        aspect_ratio: 1.1/1
                  - type: conditional
                    conditions:
                      - entity: group.all_bins
                        state: "on"
                    card:
                        type: custom:button-card
                        entity: group.all_bins
                        color_type: icon
                        color: var(--primary-text-color)
                        size: 100%
                        lock: false
                        show_name: false
                        show_state: false
                        show_label: false
                        show_icon: true
                        show_entity_picture: false
                        tap_action:
                          action: more-info
                          haptic: success
                        aspect_ratio: 1.1/1
                        margin-right: 60px
                        styles:
                          card:
                            - color: rgba(0,0,0,0)
                            - background-color: rgba(0,0,0,0)
                            - border-style: hidden
                            - padding: 0px
                            - box-shadow: none
                          grid:
                            - position: relative
                          custom_fields:
                            notification:
                              - background-color: >
                                  [[[
                                    if (states['calendar.recycling'].state == 'on')
                                      return "var(--yellow)";
                                    return "var(--green)";
                                  ]]]
                              - border-radius: 100%
                              - position: absolute
                              - left: 52%
                              - top: 8%
                              - height: 13px
                              - width: 13px
                              - font-size: 7px
                              - line-height: 13px
                        custom_fields:
                          notification: ""
                        state:
                          - value: "on"
                            color: var(--primary-color)
                          - value: "off"
                            color: var(--primary-background-color)
          - type: 'custom:button-card'
#            style: |
#              ha-card {
#                box-shadow: none;
#                background: var(--primary-color);
#                border-bottom-right-radius: 0px;
#                border-bottom-left-radius: 0px;
#              }
            color_type: auto
            color: rgba(0,0,0,0)
            styles:
             card:
               - width: 3px
#      - type: 'custom:button-card'
#        style: |
#          ha-card {
#            box-shadow: none;
#            background: var(--primary-color);
#            border-bottom-right-radius: 0px;
#            border-bottom-left-radius: 0px;
#          }
#        color_type: card
#        background-color: var(--homekit)
#        styles:
#         card:
#           - height: 10px